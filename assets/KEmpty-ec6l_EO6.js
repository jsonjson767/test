import{y,Q as P,O as B,E as C,z as I,m,ap as w,U as L,Y as v,aT as N,v as R,C as j,$ as D,j as i,Z as H,ar as x,aI as K,ab as O,H as U,_ as V,a as z,o as F,c as J,d as b,t as M,e as Q,p as X,k as Y}from"./index-CmcWA7_w.js";import{u as Z}from"./index-uLk6m4Sh.js";const[$,r,q]=y("list"),A={error:Boolean,offset:P(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:B("down"),loadingText:String,finishedText:String,immediateCheck:C};var G=I({name:$,props:A,emits:["load","update:error","update:loading"],setup(e,{emit:c,slots:a}){const n=m(e.loading),l=m(),g=m(),u=Z(),p=w(l),h=L(()=>e.scroller||p.value),o=()=>{H(()=>{if(n.value||e.finished||e.disabled||e.error||(u==null?void 0:u.value)===!1)return;const{direction:t}=e,d=+e.offset,s=x(h);if(!s.height||K(l))return;let f=!1;const _=x(g);t==="up"?f=s.top-_.top<=d:f=_.bottom-s.bottom<=d,f&&(n.value=!0,c("update:loading",!0),c("load"))})},k=()=>{if(e.finished){const t=a.finished?a.finished():e.finishedText;if(t)return i("div",{class:r("finished-text")},[t])}},T=()=>{c("update:error",!1),o()},S=()=>{if(e.error){const t=a.error?a.error():e.errorText;if(t)return i("div",{role:"button",class:r("error-text"),tabindex:0,onClick:T},[t])}},E=()=>{if(n.value&&!e.finished&&!e.disabled)return i("div",{class:r("loading")},[a.loading?a.loading():i(O,{class:r("loading-icon")},{default:()=>[e.loadingText||q("loading")]})])};return v(()=>[e.loading,e.finished,e.error],o),u&&v(u,t=>{t&&o()}),N(()=>{n.value=e.loading}),R(()=>{e.immediateCheck&&o()}),j({check:o}),D("scroll",o,{target:h,passive:!0}),()=>{var t;const d=(t=a.default)==null?void 0:t.call(a),s=i("div",{ref:g,class:r("placeholder")},null);return i("div",{ref:l,role:"feed",class:r(),"aria-busy":n.value},[e.direction==="down"?d:s,E(),k(),S(),e.direction==="up"?d:s])}}});const ie=U(G),W="/assets/empty-DwJ12Xev.png",ee=e=>(X("data-v-51d6609b"),e=e(),Y(),e),te={class:"empty fxi"},ae=ee(()=>b("img",{src:W},null,-1)),ne={__name:"KEmpty",props:["msg"],setup(e){const{t:c}=z(),a=e;return(n,l)=>(F(),J("div",te,[ae,b("p",null,M(a.mgs||Q(c)("common.empty")),1)]))}},re=V(ne,[["__scopeId","data-v-51d6609b"],["__file","C:/code/xx/kc-mobile-v2/src/components/KEmpty.vue"]]);export{ie as L,re as _};
